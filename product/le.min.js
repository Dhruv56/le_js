/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(g){function t(d){var c=(Math.random()+Math.PI).toString(36).substring(2,10),u=d.trace,h=d.token,l=d.ssl,m=[],n=!1;if(d.catchall){var p=g.onerror;g.onerror=function(e,a,b){q({error:e,line:b,url:a});p&&p(e,a,b)}}var r=function(e){return"object"===typeof e||Array.isArray(e)},k=function(e,a,b){if(r){var f=[],c;for(c in e){var d=null,d=null===e[c]?"null":void 0===e[c]?"undefined":e[c];r(d)?Array.isArray(e)?f.push(k(d,a,!1)):f.push(k(d,a+c+".",!0)):Array.isArray(e)?f.push(d):
f.push(a+c+"\x3d"+d)}return Array.isArray(e)?b?a.substring(0,a.length-1)+"\x3d"+f.join(","):f.join(","):f.join("\x26")}},q=function(d){var a={};if(1===arguments.length){var b=arguments[0];"string"===typeof b?a=b:"object"===typeof b&&(a=k(b,"",!Array.isArray(b)))}else{for(var a=Array.prototype.slice.call(arguments),b=[],f=0;f<a.length;f++)null===a[f]?b.push("null"):void 0===a[f]?b.push("undefined"):b.push(a[f]);a=b.join(" ")}a=[a];u&&a.unshift({tracecode:c});a=k(a,"",!1);n?m.push(a):s(h,a)};this.log=
q;var s=function(c,a){n=!0;var b=function(){g.ActiveXObject&&(g.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();b.onreadystatechange=function(){4===b.readyState&&(400<=b.status?console.warn("Couldn't submit events."):0<m.length?s(c,m.shift()):n=!1)};b.open("POST",(l?"https://":"http://")+"js.logentries.com/logs/"+h,!0);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Content-type","application/x-www-form-urlencoded");
b.send(a)}}var l={PER_PAGE:0,PER_ENTRY:1,NEVER:2},h;return{init:function(d){var c={ssl:!0};if("object"===typeof d)for(var g in d)c[g]=d[g];else"string"===typeof d&&(c.token=d);c.catchall=c.catchall||!1;c.trace=c.trace||!1;c.page_info=c.page_info||l.NEVER;if(void 0===c.token)throw Error("Token not present.");h=new t(c);return!0},log:function(){if(h)h.log.apply(this,arguments);else throw Error("You must call LE.init(...) first.");},InfoOptions:l}}(this);