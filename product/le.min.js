/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(a){function g(e){var t=(Math.random()+Math.PI).toString(36).substring(2,10),d=e.trace,f=e.page_info,p=e.token,g=e.print,u=e.ssl,h=[],k=!1,q=!1;if(e.catchall){var r=a.onerror;a.onerror=function(b,a,c){l({error:b,line:c,url:a}).level("ERROR").send();return r?r(b,a,c):!0}}var v=function(){var b=a.navigator||{};a.screen=a.screen||{};a.location=a.location||{};return{path:a.location.pathname,name:b.userAgent,screenWidth:a.screen.width,screenHeight:a.screen.height,windowWidth:a.innerWidth,
windowHeight:a.innerHeight}},m=function(b){if("object"!==typeof b&&!Array.isArray(b)||null===b)return"undefined"===typeof b?"undefined":null===b?"null":b;for(var a in b)b[a]=m(b[a]);return b},w=function(){var b=null,b=Array.prototype.slice.call(arguments);if(0===b.length)throw Error("No arguments!");return b=1===b.length?b[0]:m(b).join(" ")},l=function(b){"never"===f||q||(q=!0,l(v()).level("LOG").send());var a={event:w.apply(this,arguments)};d&&(a.trace=t);return{level:function(b){g&&"undefined"!==
typeof console&&console[b.toLowerCase()].call(console,a);a.level=b;return{send:function(){var b=JSON.stringify(m(a));k?h.push(b):s(p,b)}}}}};this.log=l;var s=function(b,e){k=!0;var c=function(){a.ActiveXObject&&(a.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();c.onreadystatechange=function(){4===c.readyState&&(400<=c.status?(console.error("Couldn't submit events."),410===c.status&&console.warn("This version of le_js is no longer supported!")):
(301===c.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),0<h.length?s(b,h.shift()):k=!1))};c.open("POST",(u?"https://":"http://")+"js.logentries.com/v1/logs/"+p,!0);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Content-type","text/json");c.send(e)}}var f,d=function(){if(f)return f.log.apply(this,arguments);throw Error("You must call LE.init(...) first.");};return{init:function(a){var d={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1};
if("object"===typeof a)for(var n in a)d[n]=a[n];else if("string"===typeof a)d.token=a;else throw Error("Invalid parameters for init()");if(void 0===d.token)throw Error("Token not present.");f=new g(d);return!0},log:function(){d.apply(this,arguments).level("LOG").send()},warn:function(){d.apply(this,arguments).level("WARN").send()},error:function(){d.apply(this,arguments).level("ERROR").send()},info:function(){d.apply(this,arguments).level("INFO").send()}}}(this);