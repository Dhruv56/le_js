/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(d){function k(b){var e=(Math.random()+Math.PI).toString(36).substring(2,10),g=b.trace,f=b.page_info,p=b.token,k=b.print,u=b.ssl,l=[],m=!1,q=!1;if(b.catchall){var r=d.onerror;d.onerror=function(a,c,h){s({error:a,line:h,url:c});return r?r(a,c,h).level("ERROR").send():!0}}var v=function(){var a=document.cookie.split("; "),c=null,h;for(h in a){var b=a[h].split("\x3d");if("__le_trace"===b[0]&&2===b.length){c=b[1];break}}(a=c)||(a=new Date,a.setFullYear(2100),a="__le_trace\x3d"+
e+"; expires\x3d"+a.toGMTString()+"; path\x3d/",document.cookie=a,a=e);return a},w=function(){var a=d.screen||{width:"unknown",height:"unknown"};return{name:(d.navigator||{userAgent:"unknown"}).userAgent,screenWidth:a.width,screenHeight:a.height}},n=function(a){if("object"!==typeof a&&!Array.isArray(a)||null===a)return"undefined"===typeof a?"undefined":null===a?"null":a;for(var c in a)a[c]=n(a[c]);return a},x=function(){var a=null,a=Array.prototype.slice.call(arguments);if(0===a.length)throw Error("No arguments!");
return a=1===a.length?a[0]:n(a).join(" ")},s=function(a){var c={event:x.apply(this,arguments)};"never"===f||"per-entry"!==f&&q||(c.agent=w(),q=!0);"undefined"!==typeof document&&"undefined"!==typeof document.location&&(c.path=document.location.pathname);g&&(c.trace=v());return{level:function(a){k&&"undefined"!==typeof console&&console[a.toLowerCase()].call(console,c);c.level=a;return{send:function(){var a=JSON.stringify(n(c));m?l.push(a):t(p,a)}}}}};this.log=s;var t=function(a,c){m=!0;var b=function(){d.ActiveXObject&&
(d.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();b.onreadystatechange=function(){4===b.readyState&&(400<=b.status?(console.error("Couldn't submit events."),410===b.status&&console.warn("This version of le_js is no longer supported!")):(301===b.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),0<l.length?t(a,l.shift()):m=!1))};b.open("POST",(u?"https://":"http://")+"js.logentries.com/v1/logs/"+p,!0);b.setRequestHeader("X-Requested-With",
"XMLHttpRequest");b.setRequestHeader("Content-type","text/json");b.send(c)}}var f,g=function(){if(f)return f.log.apply(this,arguments);throw Error("You must call LE.init(...) first.");};return{init:function(b){var e={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1};if("object"===typeof b)for(var d in b)e[d]=b[d];else if("string"===typeof b)e.token=b;else throw Error("Invalid parameters for init()");if(void 0===e.token)throw Error("Token not present.");f=new k(e);return!0},log:function(){g.apply(this,
arguments).level("LOG").send()},warn:function(){g.apply(this,arguments).level("WARN").send()},error:function(){g.apply(this,arguments).level("ERROR").send()},info:function(){g.apply(this,arguments).level("INFO").send()}}}(this);