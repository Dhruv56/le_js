/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(f){function l(b){var d=(Math.random()+Math.PI).toString(36).substring(2,10),w=b.trace,h=b.page_info,p=b.token,l=b.ssl,m=[],n=!1,q=!1;if(b.catchall){var r=f.onerror;f.onerror=function(e,a,c){s({error:e,line:c,url:a});r&&r(e,a,c)}}var t=function(){var e=f.screen||{};return{agent:(f.navigator||{}).userAgent,screenWidth:e.width,screenHeight:e.height}},u=function(e){return"object"===typeof e||Array.isArray(e)},k=function(e,a,c){if(u){var g=[],d;for(d in e){var b=null,b=null===
e[d]?"null":void 0===e[d]?"undefined":e[d];u(b)?Array.isArray(e)?g.push(k(b,a,!1)):g.push(k(b,a+d+".",!0)):Array.isArray(e)?g.push(b):g.push(a+d+"\x3d"+b)}return Array.isArray(e)?c?a.substring(0,a.length-1)+"\x3d"+g.join(","):g.join(","):g.join("\x26")}},s=function(e){var a={};if(1===arguments.length){var c=arguments[0];"string"===typeof c?a=c:"object"===typeof c&&(a=k(c,"",!Array.isArray(c)))}else{for(var a=Array.prototype.slice.call(arguments),c=[],b=0;b<a.length;b++)null===a[b]?c.push("null"):
void 0===a[b]?c.push("undefined"):c.push(a[b]);a=c.join(" ")}a=[{event:a}];"never"!==h&&("per-entry"===h?a.unshift(t()):q||(a.unshift(t()),q=!0));w&&a.unshift({tracecode:d});a=k(a,"",!1);n?m.push(a):v(p,a)};this.log=s;var v=function(b,a){n=!0;var c=function(){f.ActiveXObject&&(f.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();c.onreadystatechange=function(){4===c.readyState&&(400<=c.status?console.warn("Couldn't submit events."):0<m.length?v(b,
m.shift()):n=!1)};c.open("POST",(l?"https://":"http://")+"js.logentries.com/logs/"+p,!0);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Content-type","application/x-www-form-urlencoded");c.send(a)}}var h;return{init:function(b){var d={ssl:!0};if("object"===typeof b)for(var f in b)d[f]=b[f];else"string"===typeof b&&(d.token=b);d.catchall=d.catchall||!1;d.trace=d.trace||!1;d.page_info=d.page_info||"never";if(void 0===d.token)throw Error("Token not present.");h=new l(d);
return!0},log:function(){if(h)h.log.apply(this,arguments);else throw Error("You must call LE.init(...) first.");}}}(this);