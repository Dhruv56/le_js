/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(d){function g(b){var u=(Math.random()+Math.PI).toString(36).substring(2,10),e=b.trace,f=b.page_info,n=b.token,g=b.print,v=b.ssl,h=[],k=!1,p=!1;if(b.catchall){var q=d.onerror;d.onerror=function(a,c,r){l({error:a,line:r,location:c}).level("ERROR").send();return q?q(a,c,r):!0}}var s=function(){var a=d.navigator||{doNotTrack:void 0},c=d.screen||{};return{url:(d.location||{}).pathname,referrer:document.referrer,screen:{width:c.width,height:c.height},window:{width:d.innerWidth,
height:d.innerHeight},browser:{name:a.appName,version:a.appVersion,cookie_enabled:a.cookieEnabled,do_not_track:a.doNotTrack},platform:a.platform}},m=function(a){if("object"!==typeof a&&!Array.isArray(a)||null===a)return"undefined"===typeof a?"undefined":null===a?"null":a;for(var c in a)a[c]=m(a[c]);return a},w=function(){var a=null,a=Array.prototype.slice.call(arguments);if(0===a.length)throw Error("No arguments!");if(1===a.length)a=a[0];else{for(var c in a)a[c]=m(a[c]);a=a.join(" ")}return a},l=
function(a){var c={event:w.apply(this,arguments)};"never"===f||p||(p=!0,l(s()).level("LOG").send());e&&(c.trace=u);return{level:function(a){g&&"undefined"!==typeof console&&console[a.toLowerCase()].call(console,c);c.level=a;return{send:function(){var a=JSON.stringify(m(c));k?h.push(a):t(n,a)}}}}};this.log=l;this.pageInfo=s();var t=function(a,c){k=!0;var b=function(){d.ActiveXObject&&(d.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();b.onreadystatechange=
function(){4===b.readyState&&(400<=b.status?(console.error("Couldn't submit events."),410===b.status&&console.warn("This version of le_js is no longer supported!")):(301===b.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),0<h.length?t(a,h.shift()):k=!1))};b.open("POST",(v?"https://":"http://")+"js.logentries.com/v1/logs/"+n,!0);b.setRequestHeader("X-Requested-With","XMLHttpRequest");b.setRequestHeader("Content-type","text/json");b.send(c)}}var f,e=function(b){if(f)return f.log.apply(this,
arguments);throw Error("You must call LE.init(...) first.");};return{init:function(b){var d={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1};if("object"===typeof b)for(var e in b)d[e]=b[e];else if("string"===typeof b)d.token=b;else throw Error("Invalid parameters for init()");if(void 0===d.token)throw Error("Token not present.");f=new g(d);return!0},log:function(){e.apply(this,arguments).level("LOG").send()},warn:function(){e.apply(this,arguments).level("WARN").send()},error:function(){e.apply(this,
arguments).level("ERROR").send()},info:function(){e.apply(this,arguments).level("INFO").send()},pageInfo:function(){e(f.pageInfo).level("PAGE").send()}}}(this);