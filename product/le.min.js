/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(d){function h(e){var t=(Math.random()+Math.PI).toString(36).substring(2,10),f=e.trace,g=e.page_info,n=e.token,h=e.ssl,k=[],l=!1,p=!1;if(e.catchall){var q=d.onerror;d.onerror=function(a,b,c){r({error:a,line:c,url:b});q&&q(a,b,c)}}var u=function(){var a=d.screen||{width:"unknown",height:"unknown"};return{name:(d.navigator||{userAgent:"unknown"}).userAgent,screenWidth:a.width,screenHeight:a.height}},m=function(a){if("object"!==typeof a&&!Array.isArray(a)||null===a)return"undefined"===
typeof a?"undefined":null===a?"null":a;for(var b in a)a[b]=m(a[b]);return a},v=function(){var a=null,a=Array.prototype.slice.call(arguments);if(0===a.length)throw Error("No arguments!");return a=1===a.length?a[0]:m(a).join(" ")},r=function(a){var b={event:v.apply(this,arguments)};"never"===g||"per-entry"!==g&&p||(b.agent=u(),p=!0);f&&(b.trace=t);return{level:function(a){b.level=a;return{send:function(){var a=JSON.stringify(m(b));l?k.push(a):s(n,a)}}}}};this.log=r;var s=function(a,b){l=!0;var c=function(){d.ActiveXObject&&
(d.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();c.onreadystatechange=function(){4===c.readyState&&(400<=c.status?(console.error("Couldn't submit events."),410===c.status&&console.warn("This version of le_js is no longer supported!")):(301===c.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),0<k.length?s(a,k.shift()):l=!1))};c.open("POST",(h?"https://":"http://")+"js.logentries.com/v1/logs/"+n,!0);c.setRequestHeader("X-Requested-With",
"XMLHttpRequest");c.setRequestHeader("Content-type","text/json");c.send(b)}}var g,f=function(){if(g)return g.log.apply(this,arguments);throw Error("You must call LE.init(...) first.");};return{init:function(e){var d={ssl:!0,catchall:!1,trace:!1,page_info:"never"};if("object"===typeof e)for(var f in e)d[f]=e[f];else if("string"===typeof e)d.token=e;else throw Error("Invalid parameters for init()");if(void 0===d.token)throw Error("Token not present.");g=new h(d);return!0},log:function(){f.apply(this,
arguments).level("LOG").send()},warn:function(){f.apply(this,arguments).level("WARN").send()},error:function(){f.apply(this,arguments).level("ERROR").send()},info:function(){f.apply(this,arguments).level("INFO").send()}}}(this);