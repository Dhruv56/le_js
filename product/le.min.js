/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(e){function m(d){(Math.random()+Math.PI).toString(36).substring(2,10);var b=d.token,n=d.ssl,f=[],g=!1;if(d.onerror){var h=e.onerror;e.onerror=function(b,c,a){k({error:b,line:a,url:c});h&&h(b,c,a)}}var k=function(d){var c={};if(1===arguments.length){var a=arguments[0];if("string"===typeof a)c=a;else if("object"===typeof a){var c=a,a=[],e;for(e in c)a.push(e+"\x3d"+c[e]);c=a.join("\x26")}}else c=Array.prototype.slice.call(arguments).join(" ");g?f.push(c):l(b,c)};this.log=
k;var l=function(d,c){g=!0;var a=function(){e.ActiveXObject&&(e.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();a.onreadystatechange=function(){4===a.readyState&&(400<=a.status?console.warn("Couldn't submit events."):0<f.length?l(d,f.shift()):g=!1)};a.open("POST",(n?"https://":"http://")+"js.logentries.com/logs/"+b,!0);a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.setRequestHeader("Content-type","application/x-www-form-urlencoded");
a.send(c)}}var f;return{init:function(d){var b={ssl:!0};if("object"===typeof d)for(var e in d)b[e]=d[e];else"string"===typeof d&&(b.token=d);b.onerror=b.onerror||!1;b.trace=b.trace||!1;if(void 0===b.token)throw Error("Token not present.");f=new m(b);return!0},log:function(){if(f)f.log.apply(this,arguments);else throw Error("You must call LE.init(...) first.");}}}(this);