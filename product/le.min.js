/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(f){function h(e){var d=(Math.random()+Math.PI).toString(36).substring(2,10),t=e.trace,g=e.page_info,n=e.token,h=e.ssl,k=[],l=!1,p=!1;if(e.catchall){var q=f.onerror;f.onerror=function(b,a,c){r({error:b,line:c,url:a});q&&q(b,a,c)}}var m=function(b){if("object"!==typeof b&&!Array.isArray(b)||null===b)return"undefined"===typeof b?"undefined":null===b?"null":b;for(var a in b)b[a]=m(b[a]);return b},r=function(b){var a=null,a=Array.prototype.slice.call(arguments);if(0===a.length)throw Error("No arguments!");
a=1===a.length?a[0]:m(a).join(" ");a={event:a};if("never"!==g&&("per-entry"===g||!p)){var c=f.screen||{width:"unknown",height:"unknown"};a.agent={name:(f.navigator||{userAgent:"unknown"}).userAgent,screenWidth:c.width,screenHeight:c.height};p=!0}t&&(a.tracecode=d);a=JSON.stringify(m(a));l?k.push(a):s(n,a)};this.log=r;var s=function(b,a){l=!0;var c=function(){f.ActiveXObject&&(f.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();c.onreadystatechange=
function(){4===c.readyState&&(400<=c.status?console.warn("Couldn't submit events."):0<k.length?s(b,k.shift()):l=!1)};c.open("POST",(h?"https://":"http://")+"js.logentries.com/v1/logs/"+n,!0);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Content-type","text/json");c.send(a)}}var g;return{init:function(e){var d={ssl:!0};if("object"===typeof e)for(var f in e)d[f]=e[f];else"string"===typeof e&&(d.token=e);d.catchall=d.catchall||!1;d.trace=d.trace||!1;d.page_info=d.page_info||
"never";if(void 0===d.token)throw Error("Token not present.");g=new h(d);return!0},log:function(){if(g)g.log.apply(this,arguments);else throw Error("You must call LE.init(...) first.");}}}(this);