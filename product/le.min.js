/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(g){function r(c){(Math.random()+Math.PI).toString(36).substring(2,10);var d=c.token,s=c.ssl,h=[],k=!1;if(c.catchall){var m=g.onerror;g.onerror=function(e,b,a){n({error:e,line:a,url:b});m&&m(e,b,a)}}var p=function(e){return"object"===typeof e||Array.isArray(e)},l=function(e,b,a){if(p){var f=[],d;for(d in e){var c=null,c=null===e[d]?"null":void 0===e[d]?"undefined":e[d];p(c)?Array.isArray(e)?f.push(l(c,b,!1)):f.push(l(c,b+d+".",!0)):Array.isArray(e)?f.push(c):f.push(b+d+
"\x3d"+c)}return Array.isArray(e)?a?b.substring(0,b.length-1)+"\x3d["+f.join(",")+"]":"["+f.join(",")+"]":f.join("\x26")}},n=function(c){var b={};if(1===arguments.length){var a=arguments[0];"string"===typeof a?b=a:"object"===typeof a&&(b=l(a,"",!Array.isArray(a)))}else{for(var b=Array.prototype.slice.call(arguments),a=[],f=0;f<b.length;f++)null===b[f]?a.push("null"):void 0===b[f]?a.push("undefined"):a.push(b[f]);b=a.join(" ")}k?h.push(b):q(d,b)};this.log=n;var q=function(c,b){k=!0;var a=function(){g.ActiveXObject&&
(g.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});return new XMLHttpRequest}();a.onreadystatechange=function(){4===a.readyState&&(400<=a.status?console.warn("Couldn't submit events."):0<h.length?q(c,h.shift()):k=!1)};a.open("POST",(s?"https://":"http://")+"js.logentries.com/logs/"+d,!0);a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b)}}var h;return{init:function(c){var d={ssl:!0};if("object"===
typeof c)for(var g in c)d[g]=c[g];else"string"===typeof c&&(d.token=c);d.catchall=d.catchall||!1;d.trace=d.trace||!1;if(void 0===d.token)throw Error("Token not present.");h=new r(d);return!0},log:function(){if(h)h.log.apply(this,arguments);else throw Error("You must call LE.init(...) first.");}}}(this);