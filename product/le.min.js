/*
 Copyright 2013 Logentries.
 Please view license at https://raw.github.com/logentries/le_js/master/LICENSE
*/
'use strict';var LE=function(f){function g(b){var d=b.token,e=b.ssl;if(b.onerror){var h=f.onerror;f.onerror=function(b,c,a){k({err:b,l:a,u:c});h&&h(b,c,a)}}var k=function(b){var c={};if(1===arguments.length){var a=arguments[0];if("string"===typeof a)c=a;else if("object"===typeof a){var c=a,a=[],e;for(e in c)a.push(e+"\x3d"+c[e]);c=a.join("\x26")}}else c=Array.prototype.slice.call(arguments);g(d,c)};this.log=k;var g=function(b,c){var a=function(){f.ActiveXObject&&(f.XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")});
return new XMLHttpRequest}();a.onreadystatechange=function(){4===a.readyState&&400===a.status&&console.warn("Couldn't submit events. Is your token valid?")};a.open("POST",(e?"https://":"http://")+"js.logentries.com/logs/"+d,!0);a.setRequestHeader("X-Requested-With","XMLHttpRequest");a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(c)}}var e;return{init:function(b){var d={};"string"===typeof b?d.token=b:"object"===typeof b&&(d=b);d.ssl=!1;d.onerror=d.onerror||!1;if(void 0===
d.token)throw Error("Token not present.");e=new g(b);return!0},log:function(){if(e)e.log.apply(this,arguments);else throw Error("You must call LE.init(...) first.");}}}(this);